schema: '2.0'
stages:
  _check-env-tex:
    cmd: calkit check environment --name tex
    outs:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: c0376c6ba6cd17ec8b92fab0bb3554a7
      size: 2399
  sync-overleaf:
    cmd: bash --noprofile --norc -c "calkit overleaf sync --no-commit --no-push"
  build-paper:
    cmd: calkit xenv -n tex --no-check -- latexmk -cd -interaction=nonstopmode -f
      -pdf paper/main.tex
    deps:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: c0376c6ba6cd17ec8b92fab0bb3554a7
      size: 2399
    - path: paper/aasjournal.bst
      hash: md5
      md5: 1e2d4614828005814bd64e3c665b8e99
      size: 36130
    - path: paper/aastex631.cls
      hash: md5
      md5: 3a8503ea2dc529eec05658a2b11d12d0
      size: 231673
    - path: paper/figures/workflow.pdf
      hash: md5
      md5: bbdeb3fea7b0d744ffba650a0d0c40db
      size: 7722175
    - path: paper/main.tex
      hash: md5
      md5: 4f9da530a3b21586ce2f9eee18e92e02
      size: 30285
    - path: paper/references.bib
      hash: md5
      md5: 1c4bda6ff1237961e82fc142650d08b6
      size: 1030386
    - path: paper/results.tex
      hash: md5
      md5: c13e23589a77173ddec14e1c43937a53
      size: 188
    outs:
    - path: paper/main.pdf
      hash: md5
      md5: 9230fb9db06dc15c9019a2d656e60df6
      size: 7960770
  run-benchmarks:
    cmd: bash --noprofile --norc scripts/run-benchmarks.sh
    deps:
    - path: boom/Cargo.lock
      hash: md5
      md5: 17c2e970d54fd43973130c0cb496d0f5
      size: 124963
    - path: boom/src
      hash: md5
      md5: 9413bdb5a0bacb628f247f36ea6be885.dir
      size: 251282
      nfiles: 37
    - path: scripts/run-benchmarks.sh
      hash: md5
      md5: 1c645c1912c220a6f1f1b07e0d2241dc
      size: 369
    outs:
    - path: paper/results.tex
      hash: md5
      md5: c13e23589a77173ddec14e1c43937a53
      size: 188
  _check-env-boom:
    cmd: calkit check environment --name boom
    deps:
    - path: Dockerfile-boom
      hash: md5
      md5: 6e2fe0fce050fa8216f40b9b9b00a2d9
      size: 1122
    outs:
    - path: .calkit/env-locks/boom.json
      hash: md5
      md5: 8a0de1617fcb8cdaef74e70efafac3dc
      size: 2016
